--source include/have_falcon.inc
SET STORAGE_ENGINE = Falcon;
#
# Bug #23189 Falcon: Error if ALTER TABLE with partial index
#
--echo *** Bug #23189 ***
--disable_warnings
DROP TABLE IF EXISTS t1;
--enable_warnings

CREATE TABLE t1 (a varchar(3400)) Engine = MyISAM;
CREATE INDEX i ON t1 (a(10));
INSERT INTO t1 VALUES (repeat('a', 3400));

ALTER TABLE t1 Engine = Falcon;
SELECT character_length(a) FROM t1 WHERE a LIKE 'aaaaaaaaaa%';

# Final cleanup.
DROP TABLE t1;
