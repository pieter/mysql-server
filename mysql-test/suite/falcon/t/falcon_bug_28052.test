#
# Bug #28052: FalconCrash with insert while unique key for date and tinyint
#
--echo #---- Bug 28052 ----
SET STORAGE_ENGINE='Falcon';
--disable_warnings
DROP TABLE IF EXISTS t1;
--enable_warnings

CREATE TABLE t1(
 Month date NOT NULL,
 Type tinyint(3) unsigned NOT NULL auto_increment,
 UNIQUE KEY Month (Month,Type)
) ; 

--disable_abort_on_error
INSERT INTO t1 VALUES
('2003-09-01', 1),
('2003-09-01', 1),
('2003-09-01', 2),
('2003-09-01', 2),
('2003-09-01', 3);

# Final cleanup
DROP TABLE t1;
--enable_abort_on_error
