drop table if exists t1;
CREATE LOGFILE GROUP lg1
ADD UNDOFILE 'undofile.dat'
INITIAL_SIZE 1M
UNDO_BUFFER_SIZE = 1M
ENGINE=NDB;
CREATE TABLESPACE ts1
ADD DATAFILE 'datafile.dat'
USE LOGFILE GROUP lg1
INITIAL_SIZE 6M
ENGINE NDB;
create table t1 (a int column_format DYNAMIC STORAGE DISK) TABLESPACE ts1 engine NDB;
Warnings:
Warning	1466	DYNAMIC column a with STORAGE DISK is not supported, column will become FIXED
select * from information_schema.columns
where table_name = "t1";
TABLE_CATALOG	TABLE_SCHEMA	TABLE_NAME	COLUMN_NAME	ORDINAL_POSITION	COLUMN_DEFAULT	IS_NULLABLE	DATA_TYPE	CHARACTER_MAXIMUM_LENGTH	CHARACTER_OCTET_LENGTH	NUMERIC_PRECISION	NUMERIC_SCALE	CHARACTER_SET_NAME	COLLATION_NAME	COLUMN_TYPE	COLUMN_KEY	EXTRA	PRIVILEGES	COLUMN_COMMENT	COLUMN_STORAGE	COLUMN_FORMAT
NULL	test	t1	a	1	NULL	YES	int	NULL	NULL	10	0	NULL	NULL	int(11)			select,insert,update,references		Disk	Dynamic
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) STORAGE DISK COLUMN_FORMAT DYNAMIC DEFAULT NULL
) /*!50100 TABLESPACE ts1 STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
a Int NULL AT=FIXED ST=DISK
$PK Bigunsigned PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
drop table t1;
create table t1 (a int column_format DYNAMIC,
a1 int column_format FIXED,
b int NOT NULL column_format DYNAMIC,
b1 int NOT NULL column_format FIXED storage DISK,
c VARCHAR(100) column_format FIXED,
c1 VARCHAR(100) column_format DYNAMIC storage memory,
d VARCHAR(100) NOT NULL column_format FIXED,
d1 VARCHAR(100) NOT NULL column_format DYNAMIC,
e CHAR(100) column_format FIXED,
e1 CHAR(100) column_format DYNAMIC,
f CHAR(100) NOT NULL column_format FIXED,
f1 char(100) NOT NULL column_format DYNAMIC storage DISK,
index (b)) TABLESPACE ts1 engine NDB;
Warnings:
Warning	1466	DYNAMIC column f1 with STORAGE DISK is not supported, column will become FIXED
insert into t1 (b, b1, d,d1,f,f1) values
(1,1,"1","1","1","1"),
(2,2,"2","2","2","2"),
(3,3,"3","3","3","3");
alter table t1 change column a a int column_format FIXED;
Warnings:
Warning	1466	DYNAMIC column f1 with STORAGE DISK is not supported, column will become FIXED
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) COLUMN_FORMAT FIXED DEFAULT NULL,
  `a1` int(11) COLUMN_FORMAT FIXED DEFAULT NULL,
  `b` int(11) NOT NULL COLUMN_FORMAT DYNAMIC,
  `b1` int(11) NOT NULL STORAGE DISK COLUMN_FORMAT FIXED,
  `c` varchar(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `c1` varchar(100) STORAGE MEMORY COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `d` varchar(100) NOT NULL COLUMN_FORMAT FIXED,
  `d1` varchar(100) NOT NULL COLUMN_FORMAT DYNAMIC,
  `e` char(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `e1` char(100) COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `f` char(100) NOT NULL COLUMN_FORMAT FIXED,
  `f1` char(100) NOT NULL STORAGE DISK COLUMN_FORMAT DYNAMIC,
  KEY `b` (`b`)
) /*!50100 TABLESPACE ts1 STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
select * from information_schema.columns
where table_name = "t1";
TABLE_CATALOG	TABLE_SCHEMA	TABLE_NAME	COLUMN_NAME	ORDINAL_POSITION	COLUMN_DEFAULT	IS_NULLABLE	DATA_TYPE	CHARACTER_MAXIMUM_LENGTH	CHARACTER_OCTET_LENGTH	NUMERIC_PRECISION	NUMERIC_SCALE	CHARACTER_SET_NAME	COLLATION_NAME	COLUMN_TYPE	COLUMN_KEY	EXTRA	PRIVILEGES	COLUMN_COMMENT	COLUMN_STORAGE	COLUMN_FORMAT
NULL	test	t1	a	1	NULL	YES	int	NULL	NULL	10	0	NULL	NULL	int(11)			select,insert,update,references		Default	Fixed
NULL	test	t1	a1	2	NULL	YES	int	NULL	NULL	10	0	NULL	NULL	int(11)			select,insert,update,references		Default	Fixed
NULL	test	t1	b	3	NULL	NO	int	NULL	NULL	10	0	NULL	NULL	int(11)	MUL		select,insert,update,references		Default	Dynamic
NULL	test	t1	b1	4	NULL	NO	int	NULL	NULL	10	0	NULL	NULL	int(11)			select,insert,update,references		Disk	Fixed
NULL	test	t1	c	5	NULL	YES	varchar	100	100	NULL	NULL	latin1	latin1_swedish_ci	varchar(100)			select,insert,update,references		Default	Fixed
NULL	test	t1	c1	6	NULL	YES	varchar	100	100	NULL	NULL	latin1	latin1_swedish_ci	varchar(100)			select,insert,update,references		Memory	Dynamic
NULL	test	t1	d	7	NULL	NO	varchar	100	100	NULL	NULL	latin1	latin1_swedish_ci	varchar(100)			select,insert,update,references		Default	Fixed
NULL	test	t1	d1	8	NULL	NO	varchar	100	100	NULL	NULL	latin1	latin1_swedish_ci	varchar(100)			select,insert,update,references		Default	Dynamic
NULL	test	t1	e	9	NULL	YES	char	100	100	NULL	NULL	latin1	latin1_swedish_ci	char(100)			select,insert,update,references		Default	Fixed
NULL	test	t1	e1	10	NULL	YES	char	100	100	NULL	NULL	latin1	latin1_swedish_ci	char(100)			select,insert,update,references		Default	Dynamic
NULL	test	t1	f	11	NULL	NO	char	100	100	NULL	NULL	latin1	latin1_swedish_ci	char(100)			select,insert,update,references		Default	Fixed
NULL	test	t1	f1	12	NULL	NO	char	100	100	NULL	NULL	latin1	latin1_swedish_ci	char(100)			select,insert,update,references		Disk	Dynamic
alter table t1 change column a a int storage disk;
Warnings:
Warning	1466	DYNAMIC column f1 with STORAGE DISK is not supported, column will become FIXED
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) STORAGE DISK DEFAULT NULL,
  `a1` int(11) COLUMN_FORMAT FIXED DEFAULT NULL,
  `b` int(11) NOT NULL COLUMN_FORMAT DYNAMIC,
  `b1` int(11) NOT NULL STORAGE DISK COLUMN_FORMAT FIXED,
  `c` varchar(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `c1` varchar(100) STORAGE MEMORY COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `d` varchar(100) NOT NULL COLUMN_FORMAT FIXED,
  `d1` varchar(100) NOT NULL COLUMN_FORMAT DYNAMIC,
  `e` char(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `e1` char(100) COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `f` char(100) NOT NULL COLUMN_FORMAT FIXED,
  `f1` char(100) NOT NULL STORAGE DISK COLUMN_FORMAT DYNAMIC,
  KEY `b` (`b`)
) /*!50100 TABLESPACE ts1 STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
a Int NULL AT=FIXED ST=DISK
a1 Int NULL AT=FIXED ST=MEMORY
b Int NOT NULL AT=FIXED ST=MEMORY DYNAMIC
b1 Int NOT NULL AT=FIXED ST=DISK
c Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY
c1 Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
d Varchar(100;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
d1 Varchar(100;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
e Char(100;latin1_swedish_ci) NULL AT=FIXED ST=MEMORY
e1 Char(100;latin1_swedish_ci) NULL AT=FIXED ST=MEMORY DYNAMIC
f Char(100;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
f1 Char(100;latin1_swedish_ci) NOT NULL AT=FIXED ST=DISK
$PK Bigunsigned PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
alter table t1 change column a a int storage memory;
Warnings:
Warning	1466	DYNAMIC column f1 with STORAGE DISK is not supported, column will become FIXED
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) STORAGE MEMORY DEFAULT NULL,
  `a1` int(11) COLUMN_FORMAT FIXED DEFAULT NULL,
  `b` int(11) NOT NULL COLUMN_FORMAT DYNAMIC,
  `b1` int(11) NOT NULL STORAGE DISK COLUMN_FORMAT FIXED,
  `c` varchar(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `c1` varchar(100) STORAGE MEMORY COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `d` varchar(100) NOT NULL COLUMN_FORMAT FIXED,
  `d1` varchar(100) NOT NULL COLUMN_FORMAT DYNAMIC,
  `e` char(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `e1` char(100) COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `f` char(100) NOT NULL COLUMN_FORMAT FIXED,
  `f1` char(100) NOT NULL STORAGE DISK COLUMN_FORMAT DYNAMIC,
  KEY `b` (`b`)
) /*!50100 TABLESPACE ts1 STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
a Int NULL AT=FIXED ST=MEMORY
a1 Int NULL AT=FIXED ST=MEMORY
b Int NOT NULL AT=FIXED ST=MEMORY DYNAMIC
b1 Int NOT NULL AT=FIXED ST=DISK
c Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY
c1 Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
d Varchar(100;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
d1 Varchar(100;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
e Char(100;latin1_swedish_ci) NULL AT=FIXED ST=MEMORY
e1 Char(100;latin1_swedish_ci) NULL AT=FIXED ST=MEMORY DYNAMIC
f Char(100;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
f1 Char(100;latin1_swedish_ci) NOT NULL AT=FIXED ST=DISK
$PK Bigunsigned PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
alter table t1 change column b b int NOT NULL storage memory;
Warnings:
Warning	1466	DYNAMIC column f1 with STORAGE DISK is not supported, column will become FIXED
alter table t1 add column a2 int column_format FIXED;
Warnings:
Warning	1466	DYNAMIC column f1 with STORAGE DISK is not supported, column will become FIXED
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) STORAGE MEMORY DEFAULT NULL,
  `a1` int(11) COLUMN_FORMAT FIXED DEFAULT NULL,
  `b` int(11) NOT NULL STORAGE MEMORY,
  `b1` int(11) NOT NULL STORAGE DISK COLUMN_FORMAT FIXED,
  `c` varchar(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `c1` varchar(100) STORAGE MEMORY COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `d` varchar(100) NOT NULL COLUMN_FORMAT FIXED,
  `d1` varchar(100) NOT NULL COLUMN_FORMAT DYNAMIC,
  `e` char(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `e1` char(100) COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `f` char(100) NOT NULL COLUMN_FORMAT FIXED,
  `f1` char(100) NOT NULL STORAGE DISK COLUMN_FORMAT DYNAMIC,
  `a2` int(11) COLUMN_FORMAT FIXED DEFAULT NULL,
  KEY `b` (`b`)
) /*!50100 TABLESPACE ts1 STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
a Int NULL AT=FIXED ST=MEMORY
a1 Int NULL AT=FIXED ST=MEMORY
b Int NOT NULL AT=FIXED ST=MEMORY
b1 Int NOT NULL AT=FIXED ST=DISK
c Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY
c1 Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
d Varchar(100;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
d1 Varchar(100;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
e Char(100;latin1_swedish_ci) NULL AT=FIXED ST=MEMORY
e1 Char(100;latin1_swedish_ci) NULL AT=FIXED ST=MEMORY DYNAMIC
f Char(100;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
f1 Char(100;latin1_swedish_ci) NOT NULL AT=FIXED ST=DISK
a2 Int NULL AT=FIXED ST=MEMORY
$PK Bigunsigned PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
alter table t1 add column c2 VARCHAR(100) column_format DYNAMIC;
Warnings:
Warning	1466	DYNAMIC column f1 with STORAGE DISK is not supported, column will become FIXED
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) STORAGE MEMORY DEFAULT NULL,
  `a1` int(11) COLUMN_FORMAT FIXED DEFAULT NULL,
  `b` int(11) NOT NULL STORAGE MEMORY,
  `b1` int(11) NOT NULL STORAGE DISK COLUMN_FORMAT FIXED,
  `c` varchar(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `c1` varchar(100) STORAGE MEMORY COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `d` varchar(100) NOT NULL COLUMN_FORMAT FIXED,
  `d1` varchar(100) NOT NULL COLUMN_FORMAT DYNAMIC,
  `e` char(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `e1` char(100) COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `f` char(100) NOT NULL COLUMN_FORMAT FIXED,
  `f1` char(100) NOT NULL STORAGE DISK COLUMN_FORMAT DYNAMIC,
  `a2` int(11) COLUMN_FORMAT FIXED DEFAULT NULL,
  `c2` varchar(100) COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  KEY `b` (`b`)
) /*!50100 TABLESPACE ts1 STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
a Int NULL AT=FIXED ST=MEMORY
a1 Int NULL AT=FIXED ST=MEMORY
b Int NOT NULL AT=FIXED ST=MEMORY
b1 Int NOT NULL AT=FIXED ST=DISK
c Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY
c1 Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
d Varchar(100;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
d1 Varchar(100;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
e Char(100;latin1_swedish_ci) NULL AT=FIXED ST=MEMORY
e1 Char(100;latin1_swedish_ci) NULL AT=FIXED ST=MEMORY DYNAMIC
f Char(100;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
f1 Char(100;latin1_swedish_ci) NOT NULL AT=FIXED ST=DISK
a2 Int NULL AT=FIXED ST=MEMORY
c2 Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
$PK Bigunsigned PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
alter table t1 add column c3 VARCHAR(100) column_format FIXED;
Warnings:
Warning	1466	DYNAMIC column f1 with STORAGE DISK is not supported, column will become FIXED
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) STORAGE MEMORY DEFAULT NULL,
  `a1` int(11) COLUMN_FORMAT FIXED DEFAULT NULL,
  `b` int(11) NOT NULL STORAGE MEMORY,
  `b1` int(11) NOT NULL STORAGE DISK COLUMN_FORMAT FIXED,
  `c` varchar(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `c1` varchar(100) STORAGE MEMORY COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `d` varchar(100) NOT NULL COLUMN_FORMAT FIXED,
  `d1` varchar(100) NOT NULL COLUMN_FORMAT DYNAMIC,
  `e` char(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  `e1` char(100) COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `f` char(100) NOT NULL COLUMN_FORMAT FIXED,
  `f1` char(100) NOT NULL STORAGE DISK COLUMN_FORMAT DYNAMIC,
  `a2` int(11) COLUMN_FORMAT FIXED DEFAULT NULL,
  `c2` varchar(100) COLUMN_FORMAT DYNAMIC DEFAULT NULL,
  `c3` varchar(100) COLUMN_FORMAT FIXED DEFAULT NULL,
  KEY `b` (`b`)
) /*!50100 TABLESPACE ts1 STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
a Int NULL AT=FIXED ST=MEMORY
a1 Int NULL AT=FIXED ST=MEMORY
b Int NOT NULL AT=FIXED ST=MEMORY
b1 Int NOT NULL AT=FIXED ST=DISK
c Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY
c1 Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
d Varchar(100;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
d1 Varchar(100;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
e Char(100;latin1_swedish_ci) NULL AT=FIXED ST=MEMORY
e1 Char(100;latin1_swedish_ci) NULL AT=FIXED ST=MEMORY DYNAMIC
f Char(100;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
f1 Char(100;latin1_swedish_ci) NOT NULL AT=FIXED ST=DISK
a2 Int NULL AT=FIXED ST=MEMORY
c2 Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
c3 Varchar(100;latin1_swedish_ci) NULL AT=SHORT_VAR ST=MEMORY
$PK Bigunsigned PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
drop table t1;
create table t1 (a int storage disk column_format FIXED) TABLESPACE ts1 engine NDB;
alter table t1 change column a a int storage memory column_format DYNAMIC;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) STORAGE MEMORY COLUMN_FORMAT DYNAMIC DEFAULT NULL
) /*!50100 TABLESPACE ts1 STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
a Int NULL AT=FIXED ST=MEMORY DYNAMIC
$PK Bigunsigned PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
drop table t1;
ALTER TABLESPACE ts1
DROP DATAFILE 'datafile.dat'
ENGINE NDB;
drop tablespace ts1
engine ndb;
drop logfile group lg1
engine ndb;
