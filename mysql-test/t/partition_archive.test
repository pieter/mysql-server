# Tests for the partition storage engine in connection with the
# storage engine ARCHIVE.
#
# Creation:
# 2007-10-18 mleich  - Move ARCHIVE related sub tests of partition.test to
#                      this test. Reason: ARCHIVE is not everytime available.
#                    - Minor cleanup
#

--source include/have_partition.inc
--source include/have_archive.inc


#
# Bug 17310 Partitions: Bugs with archived partitioned tables
#
--disable_warnings
drop database if exists db99;
--enable_warnings
create database db99;
use db99;
create table t1 (a int not null)
engine=archive
partition by list (a)
(partition p0 values in (1), partition p1 values in (2));
insert into t1 values (1), (2);
--error 0, ER_CANT_CREATE_TABLE
create index inx on t1 (a);
alter table t1 add partition (partition p2 values in (3));
alter table t1 drop partition p2;
use test;
drop database db99;
