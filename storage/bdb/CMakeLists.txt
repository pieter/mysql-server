SET(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -DSAFEMALLOC -DSAFE_MUTEX")
SET(CMAKE_C_FLAGS_DEBUG "${CMAKE_C_FLAGS_DEBUG} -DSAFEMALLOC -DSAFE_MUTEX")

INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/storage/bdb/build_win32
                    ${CMAKE_SOURCE_DIR}/storage/bdb/dbinc
                    ${CMAKE_SOURCE_DIR}/storage/bdb)

# BDB needs a number of source files that are auto-generated by the unix
# configure. So to build BDB, it is necessary to copy these over to the Windows
# bitkeeper tree, or to use a source .tar.gz package which already has these
# files.
ADD_LIBRARY(bdb crypto/aes_method.c btree/bt_compact.c btree/bt_compare.c
            btree/bt_conv.c btree/bt_curadj.c btree/bt_cursor.c
            btree/bt_delete.c btree/bt_method.c btree/bt_open.c btree/bt_put.c
            btree/bt_rec.c btree/bt_reclaim.c btree/bt_recno.c
            btree/bt_rsearch.c btree/bt_search.c btree/bt_split.c
            btree/bt_stat.c btree/bt_upgrade.c btree/bt_verify.c
            btree/btree_auto.c db/crdel_auto.c db/crdel_rec.c crypto/crypto.c
            db/db.c db/db_am.c db/db_auto.c common/db_byteorder.c db/db_cam.c
            common/db_clock.c db/db_conv.c db/db_dispatch.c db/db_dup.c
            common/db_err.c common/db_getlong.c common/db_idspace.c
            db/db_iface.c db/db_join.c common/db_log2.c db/db_meta.c
            db/db_method.c db/db_open.c db/db_overflow.c db/db_ovfl_vrfy.c
            db/db_pr.c db/db_rec.c db/db_reclaim.c db/db_remove.c
            db/db_rename.c db/db_ret.c env/db_salloc.c db/db_setid.c
            db/db_setlsn.c env/db_shash.c db/db_stati.c db/db_truncate.c
            db/db_upg.c db/db_upg_opd.c db/db_vrfy.c db/db_vrfyutil.c
            dbm/dbm.c dbreg/dbreg.c dbreg/dbreg_auto.c dbreg/dbreg_rec.c
            dbreg/dbreg_stat.c dbreg/dbreg_util.c env/env_failchk.c
            env/env_file.c env/env_method.c env/env_open.c env/env_recover.c
            env/env_region.c env/env_register.c env/env_stat.c
            fileops/fileops_auto.c fileops/fop_basic.c fileops/fop_rec.c
            fileops/fop_util.c hash/hash.c hash/hash_auto.c hash/hash_conv.c
            hash/hash_dup.c hash/hash_func.c hash/hash_meta.c
            hash/hash_method.c hash/hash_open.c hash/hash_page.c
            hash/hash_rec.c hash/hash_reclaim.c hash/hash_stat.c
            hash/hash_upgrade.c hash/hash_verify.c hmac/hmac.c
            hsearch/hsearch.c lock/lock.c lock/lock_deadlock.c
            lock/lock_failchk.c lock/lock_id.c lock/lock_list.c
            lock/lock_method.c lock/lock_region.c lock/lock_stat.c
            lock/lock_timer.c lock/lock_util.c log/log.c log/log_archive.c
            log/log_compare.c log/log_debug.c log/log_get.c log/log_method.c
            log/log_put.c log/log_stat.c mp/mp_alloc.c mp/mp_bh.c mp/mp_fget.c
            mp/mp_fmethod.c mp/mp_fopen.c mp/mp_fput.c mp/mp_fset.c
            mp/mp_method.c mp/mp_region.c mp/mp_register.c mp/mp_stat.c
            mp/mp_sync.c mp/mp_trickle.c crypto/mersenne/mt19937db.c
            mutex/mut_alloc.c mutex/mut_method.c mutex/mut_region.c
            mutex/mut_stat.c mutex/mut_tas.c mutex/mut_win32.c
            os_win32/os_abs.c os/os_alloc.c os_win32/os_clock.c
            os_win32/os_config.c os_win32/os_dir.c os_win32/os_errno.c
            os_win32/os_fid.c os_win32/os_flock.c os_win32/os_fsync.c
            os_win32/os_handle.c os/os_id.c os_win32/os_map.c os/os_method.c
            os/os_oflags.c os_win32/os_open.c os/os_region.c
            os_win32/os_rename.c os/os_root.c os/os_rpath.c os_win32/os_rw.c
            os_win32/os_seek.c os_win32/os_sleep.c os_win32/os_spin.c
            os_win32/os_stat.c os/os_tmpdir.c os_win32/os_truncate.c
            os/os_unlink.c qam/qam.c qam/qam_auto.c qam/qam_conv.c
            qam/qam_files.c qam/qam_method.c qam/qam_open.c qam/qam_rec.c
            qam/qam_stat.c qam/qam_upgrade.c qam/qam_verify.c rep/rep_auto.c
            rep/rep_backup.c rep/rep_elect.c rep/rep_log.c rep/rep_method.c
            rep/rep_record.c rep/rep_region.c rep/rep_stat.c rep/rep_stub.c
            rep/rep_util.c rep/rep_verify.c crypto/rijndael/rijndael-alg-fst.c
            crypto/rijndael/rijndael-api-fst.c hmac/sha1.c clib/strcasecmp.c
            txn/txn.c txn/txn_auto.c txn/txn_chkpt.c txn/txn_failchk.c
            txn/txn_method.c txn/txn_rec.c txn/txn_recover.c txn/txn_region.c
            txn/txn_stat.c txn/txn_util.c common/util_log.c common/util_sig.c
            xa/xa.c xa/xa_db.c xa/xa_map.c)
