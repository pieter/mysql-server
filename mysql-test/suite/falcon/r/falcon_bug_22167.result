*** Bug #22167 ***
SET @@storage_engine = 'Falcon';
DROP TABLE IF EXISTS t1;
DROP TABLE IF EXISTS t2;
CREATE TABLE t1 (
id int not null,
name char(20) not null,
primary key (id)
);
CREATE TABLE t2 (
id int unsigned not null auto_increment,
code tinyint unsigned not null,
name char(20) not null,
primary key (id),
key (code),
unique (name)
);
INSERT INTO t1 (id, name) VALUES (1, 'Tim'), (2, 'Monty');
SELECT id, name FROM t1 ORDER BY id;
id	name
1	Tim
2	Monty
UPDATE IGNORE t1 SET id = 8, name = 'Sinisa' WHERE id < 3;
SELECT count(*) FROM t1 WHERE name = 'Sinisa';
count(*)
1
INSERT INTO t2 (code, name) VALUES (1, 'Tim'), (1, 'Monty');
SELECT id, code, name FROM t2 ORDER BY id;
id	code	name
1	1	Tim
2	1	Monty
UPDATE IGNORE t2 SET id = 8, name = 'Sinisa' WHERE id < 3;
SELECT count(*) FROM t2 WHERE name = 'Sinisa';
count(*)
1
SELECT count(*) FROM t1;
count(*)
2
SELECT count(*) FROM t2;
count(*)
2
DROP TABLE t1;
DROP TABLE t2;
