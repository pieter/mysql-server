--source include/have_falcon.inc
#
# Bug #29511: Create new tablespace with existing datafile name destroys existing tablespace
#
--echo *** Bug #29511 ***

# ----------------------------------------------------- #
# --- Initialisation                                --- #
# ----------------------------------------------------- #

--disable_warnings
--error 0,ER_NO_SUCH_TABLESPACE
DROP TABLESPACE tablespace1 Engine Falcon;
--enable_warnings

CREATE TABLESPACE tablespace1 ADD DATAFILE 'falcon_tablespace.fts' Engine Falcon;

# ----------------------------------------------------- #
# --- Test                                          --- #
# ----------------------------------------------------- #
--error ER_TABLESPACE_EXIST
CREATE TABLESPACE tablespace2 ADD DATAFILE 'falcon_tablespace.fts' Engine Falcon;

# ----------------------------------------------------- #
# --- Check                                         --- #
# ----------------------------------------------------- #

# ----------------------------------------------------- #
# --- Final cleanup                                 --- #
# ----------------------------------------------------- #
DROP TABLESPACE tablespace1 Engine Falcon;
