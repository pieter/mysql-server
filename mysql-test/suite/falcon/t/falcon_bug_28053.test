SET STORAGE_ENGINE = Falcon;
#
# Bug #28053: Falcon crash on multi table update
#   This test is derived from innodb.test
#
--echo *** Bug 28053 ***
--enable_abort_on_error
--disable_warnings
DROP TABLE IF EXISTS t1, t2;
--enable_warnings

create table t1 (a int not null, b int, primary key (a));
create table t2 (a int not null, b int, primary key (a));
insert into t1 values (10, 20);
insert into t2 values (10, 20);
update t1, t2 set t1.b = 150, t2.b = t1.b where t2.a = t1.a and t1.a = 10;

select count(*) from t1 where b = 150;
select count(*) from t2 where b = 150;

# Final cleanup.
DROP TABLE t1, t2;
