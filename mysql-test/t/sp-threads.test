#
# Testing stored procedures with multiple connections
#

connect (con1root,localhost,root,,);
connect (con2root,localhost,root,,);

connection con1root;
use test;

--disable_warnings
drop table if exists t1;
--enable_warnings
create table t1 (s1 int, s2 int, s3 int);

delimiter //; 
create procedure bug4934()
begin
   insert into t1 values (1,0,1);
end//
delimiter ;//


connection con2root;
use test;

call bug4934();
select * from t1;


connection con1root;

drop table t1;
create table t1 (s1 int, s2 int, s3 int);

drop procedure bug4934;
delimiter //; 
create procedure bug4934()
begin
end//
delimiter ;//


connection con2root;

select * from t1;
call bug4934();
select * from t1;

connection con1root;

drop table t1;
drop procedure bug4934;

