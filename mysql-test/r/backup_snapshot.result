DROP DATABASE IF EXISTS bup_snapshot;
CREATE DATABASE bup_snapshot;
CREATE TABLE bup_snapshot.t1 (word CHAR(20)) ENGINE=INNODB;
INSERT INTO bup_snapshot.t1 VALUES ("01 Some data to test");
INSERT INTO bup_snapshot.t1 VALUES ("02 Some data to test");
INSERT INTO bup_snapshot.t1 VALUES ("03 Some data to test");
INSERT INTO bup_snapshot.t1 VALUES ("04 Some data to test");
INSERT INTO bup_snapshot.t1 VALUES ("05 Some data to test");
INSERT INTO bup_snapshot.t1 VALUES ("06 Some data to test");
INSERT INTO bup_snapshot.t1 VALUES ("07 Some data to test");
INSERT INTO bup_snapshot.t1 VALUES ("08 Some data to test");
INSERT INTO bup_snapshot.t1 VALUES ("09 Some data to test");
INSERT INTO bup_snapshot.t1 VALUES ("10 Some data to test");
con1: Show that the new data doesn't exist before backup.
SELECT * FROM bup_snapshot.t1 WHERE word LIKE '-%';
word
SELECT COUNT(*) FROM bup_snapshot.t1;
COUNT(*)
10
con1: Backing up database.
BACKUP DATABASE bup_snapshot TO "bup_snapshot.bak";
Backup Summary
 header     =       22 bytes
 meta-data  =       95 bytes
 data       =      260 bytes
              --------------
 total             377 bytes
con2: Inserting new data.
INSERT INTO bup_snapshot.t1 VALUES("- Dave Mathews");
INSERT INTO bup_snapshot.t1 VALUES("- Yes");
INSERT INTO bup_snapshot.t1 VALUES("- Jethro Tull");
DELETE FROM bup_snapshot.t1 WHERE word LIKE '10%';
con2: Showing the data after inserts.
SELECT * FROM bup_snapshot.t1 WHERE word LIKE '-%';
word
- Dave Mathews
- Yes
- Jethro Tull
SELECT COUNT(*) FROM bup_snapshot.t1;
COUNT(*)
12
con1: Dropping the database
DROP TABLE bup_snapshot.t1;
con1: Restoring the database
RESTORE FROM "bup_snapshot.bak";
Restore Summary
 header     =       22 bytes
 meta-data  =       95 bytes
 data       =      260 bytes
              --------------
 total             377 bytes
con1: Showing the data (no new data should be here).
SELECT * FROM bup_snapshot.t1 WHERE word LIKE '-%';
word
SELECT COUNT(*) FROM bup_snapshot.t1;
COUNT(*)
10
DROP DATABASE bup_snapshot;
