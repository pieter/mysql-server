--source include/have_falcon.inc
SET @@storage_engine = Falcon;
#
# Bug #23220: Falcon: Setting falcon_page_size to non-default size crashes Falcon
#   First part of six. We are testing page sizes of 1, 2, 4, 8, 16, and 32 KB.
#
--echo *** Bug #23220_1 ***
--disable_warnings
DROP SCHEMA IF EXISTS page_1;
--enable_warnings

SHOW VARIABLES LIKE 'falcon_page_size';
CREATE SCHEMA page_1;
USE page_1;

CREATE TABLE t1 (a int);
INSERT INTO t1 VALUES (1);
SELECT count(*) FROM t1;

CREATE TABLE t2 (a varchar(500), b varchar(505), PRIMARY KEY (a, b));
INSERT INTO t2 VALUES (repeat('a', 500), repeat('b', 505));
SELECT count(*) FROM t2 WHERE a = repeat('a', 500) AND b = repeat('b', 505);

# Final cleanup.
DROP TABLE t1;
DROP TABLE t2;
DROP SCHEMA page_1;
USE test;
