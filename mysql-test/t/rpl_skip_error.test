##########################################
# 2006-02-07 By JBM: Added order by
#########################################
# Note that errors are ignored by opt file.
source include/master-slave.inc;

create table t1 (n int not null primary key);
save_master_pos;
connection slave;
sync_with_master;
insert into t1 values (1);
connection master;
# Here we expect (ignored) error, since 1 is already in slave table 
insert into t1 values (1);

# These should work fine
insert into t1 values (2),(3);

save_master_pos;
connection slave;
sync_with_master;
select * from t1 ORDER BY n;

# Cleanup
connection master;
drop table t1;
sync_slave_with_master;

# End of 4.1 tests

#
# #28839 Errors in strict mode silently stop SQL thread if --slave-skip-errors exists
#
create table t1(a int primary key);
insert into t1 values (1),(2);
delete from t1 where @@server_id=1;
set sql_mode=strict_trans_tables;
select @@server_id;
insert into t1 values (1),(2),(3);
sync_slave_with_master;
connection slave;
select @@server_id;
select * from t1;
show slave status;
connection master;
drop table t1;
sync_with_master;
# End of 5.0 tests
