drop procedure if exists sp1;
create table t1 (a int) engine=innodb|
create procedure sp1 ()
begin
truncate table t1; insert t1 values (1); rollback;
end|
set autocommit=0;
insert t1 values (2);
call sp1();
ERROR HY000: Can't execute the given command because you have active locked tables or an active transaction
commit;
select * from t1;
a
2
call sp1();
ERROR HY000: Can't execute the given command because you have active locked tables or an active transaction
set autocommit=1;
select * from t1;
a
2
drop table t1;
drop procedure sp1;
