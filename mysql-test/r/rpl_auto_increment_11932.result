stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
drop database if exists t1;
create database t1;
use t1;
CREATE TABLE `t` (
`id` int(10) unsigned NOT NULL auto_increment,
`fname` varchar(100) default NULL,
PRIMARY KEY  (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;
INSERT INTO `t` VALUES (1, 'blablabla');
CREATE TABLE `test3` (
`id` int(10) NOT NULL auto_increment,
`comment` varchar(255) NOT NULL default '',
PRIMARY KEY  (`id`)
) ENGINE=MyISAM  AUTO_INCREMENT=3 ;
INSERT INTO `test3` VALUES (1, 'testtest 1');
INSERT INTO `test3` VALUES (2, 'test 2');
CREATE PROCEDURE simpleproc3 ()
NOT DETERMINISTIC
BEGIN
INSERT INTO t (fname) (SELECT test3.comment FROM test3 WHERE test3.id = '1');
INSERT INTO t (fname) VALUES('test');
END
$
CALL simpleproc3();
select * from test3;
id	comment
1	testtest 1
2	test 2
TRUNCATE TABLE `t`;
CALL simpleproc3();
select * from t;
id	fname
1	testtest 1
2	test
use t1;
select * from t;
id	fname
1	testtest 1
2	test
drop database t1;
